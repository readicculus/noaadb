{
    "openapi":"3.0.0",
    "info":{
        "description":"Label dataset",
        "version":"1.0.0",
        "title":"NOAA Arctic Animals Label API",
        "contact":{
            "email":"yuval@cs.washington.edu"
        },
        "license":{
            "name":"MIT",
            "url":"https://opensource.org/licenses/MIT"
        }
    },
    "servers":[
        {
            "url":"/"
        }
    ],
    "tags":[
        {
            "name":"API",
            "description":"Endpoints for getting label and image information"
        }
    ],
    "paths":{
        "/api/hotspots":{
            "post":{
                "tags": ["API"],
                "summary":"Returns hotspotsResult",
                "requestBody":{
                    "description":"Hotspot Filtering",
                    "required":true,
                    "content":{
                        "application/json":{
                            "schema":{
                                "$ref":"#/components/schemas/hotspotsRequest"
                            }
                        }
                    }
                },
                "produces":[
                    "application/json"
                ],
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "application/json":{
                                "schema":{
                                    "$ref":"#/components/schemas/hotspotsResult"
                                }
                            }
                        }
                    },
                    "400":{
                        "description":"Failed. Bad post data."
                    }
                }
            }
        },
        "/api/species":{
            "get":{
              "tags": ["API"],
              "summary":"Returns species",
                "produces":[
                    "application/json"
                ],
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "application/json":{
                                "schema":{
                                    "type":"array",
                                    "items":{
                                        "$ref":"#/components/schemas/species"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/jobs":{
            "get":{
                "tags": ["API"],
                "summary":"Returns jobs",
                "produces":[
                    "application/json"
                ],
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "application/json":{
                                "schema":{
                                    "type":"array",
                                    "items":{
                                        "$ref":"#/components/schemas/job"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/workers":{
            "get":{
                "tags": ["API"],
                "summary":"Returns workers",
                "produces":[
                    "application/json"
                ],
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "application/json":{
                                "schema":{
                                    "type":"object",
                                    "additionalProperties":{
                                      "$ref":"#/components/schemas/worker"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components":{
        "schemas":{
            "hotspotsRequest":{
                "type":"object",
                "properties":{
                    "species_list":{
                        "required":"false",
                        "default":[
                            "Ringed Seal",
                            "Bearded Seal",
                            "Polar Bear",
                            "UNK Seal"
                        ],
                        "description":"If parameter not defined default is used, if given an empty list all species are used<br/>See /api/species for a list of all species",
                        "type":"array",
                        "items":{
                            "type":"string"
                        },
                        "example":[
                            "Polar Bear"
                        ]
                    },
                    "workers":{
                        "type":"array",
                        "items":{
                            "type":"string"
                        },
                        "required":"false",
                        "default":[

                        ],
                        "description":"If parameter not defined default is used, if given an empty list all workers are used<br/>See /api/workers for a list of all workers",
                        "example":[

                        ]
                    },
                    "jobs":{
                        "type":"array",
                        "items":{
                            "type":"string"
                        },
                        "required":"false",
                        "default":[

                        ],
                        "description":"If parameter not defined default is used, if given an empty list all jobs are used<br/>See /api/jobs for a list of all jobs",
                        "example":[

                        ]
                    },
                    "image_type":{
                        "type":"string",
                        "required":"false",
                        "default":"eo",
                        "description":"options: 'eo' or 'ir'",
                        "example":"eo"
                    },
                    "show_shadows":{
                        "type":"boolean",
                        "default":false,
                        "description":"foobar",
                        "example":false
                    },
                    "exclude_invalid_labels":{
                        "type":"boolean",
                        "default":"true",
                        "description":"foobar",
                        "example":true
                    },
                    "show_removed_labels":{
                        "type":"boolean",
                        "default":"false",
                        "description":"foobar",
                        "example":false
                    }
                }
            },
            "image":{
                "type":"object",
                "properties":{
                    "name":{
                        "type":"integer"
                    },
                    "width":{
                        "type":"integer"
                    }
                }
            },
            "label_array":{
                "type":"array",
                "items":{
                    "$ref":"#/components/schemas/label"
                }
            },
            "hotspotsResult":{
                "type":"object",
                "properties":{
                    "images":{
                        "type":"object",
                        "additionalProperties":{
                            "$ref":"#/components/schemas/image"
                        }
                    },
                    "labels":{
                        "type":"object",
                        "additionalProperties":{
                            "$ref":"#/components/schemas/label_array"
                        }
                    },
                    "invalid":{
                        "type":"array",
                        "items":{
                            "type":"object"
                        },
                        "description":"x"
                    },
                    "image_count":{
                        "type":"integer",
                        "description":"foobar"
                    },
                    "label_count":{
                        "type":"integer",
                        "description":"foobar"
                    }
                }
            },
            "label":{
                "type":"object",
                "properties":{
                    "id":{
                        "type":"integer"
                    },
                    "x1":{
                        "type":"integer"
                    },
                    "x2":{
                        "type":"integer"
                    },
                    "y1":{
                        "type":"integer"
                    },
                    "y2":{
                        "type":"integer"
                    },
                    "is_shadow":{
                        "type":"boolean"
                    },
                    "hotspot_id":{
                        "type":"string",
                        "description":"The NOAA-assigned identifier for an animal, if NULL then not assigned an id yet"
                    },
                    "species_id":{
                        "type":"integer",
                        "description":"see /api/species for species_id->name data"
                    },
                    "start_date":{
                        "type":"string",
                        "description":"date of label insertion"
                    },
                    "age_class":{
                        "type":"string"
                    },
                    "image_id":{
                        "type":"integer"
                    }
                }
            },
            "species":{
                "type":"object",
                "properties":{
                    "id":{
                        "type":"integer",
                        "description":"species id"
                    },
                    "name":{
                        "type":"string"
                    }
                }
            },
            "job":{
                "type":"object",
                "properties":{
                    "id":{
                        "type":"integer",
                        "description":"job id"
                    },
                    "job_name":{
                        "type":"string"
                    },
                    "notes":{
                        "type":"string"
                    }
                }
            },
            "worker":{
                "type":"object",
                "properties":{
                    "name":{
                        "type":"string"
                    },
                    "human":{
                        "type":"boolean"
                    }
                }
            }
        }
    }
}